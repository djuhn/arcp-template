!function($,e,n,o){"use strict";e="undefined"!=typeof e&&e.Math==Math?e:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),$.fn.embed=function(n){var t=$(this),r=t.selector||"",a=(new Date).getTime(),i=[],c=arguments[0],l="string"==typeof c,d=[].slice.call(arguments,1),u;return t.each(function(){var s=$.isPlainObject(n)?$.extend(!0,{},$.fn.embed.settings,n):$.extend({},$.fn.embed.settings),m=s.selector,p=s.className,f=s.sources,h=s.error,b=s.metadata,g=s.namespace,v=s.templates,y="."+g,w="module-"+g,P=$(e),C=$(this),E=C.find(m.placeholder),U=C.find(m.icon),j=C.find(m.embed),S=this,T=C.data(w),x;x={initialize:function(){x.debug("Initializing embed"),x.determine.autoplay(),x.create(),x.bind.events(),x.instantiate()},instantiate:function(){x.verbose("Storing instance of module",x),T=x,C.data(w,x)},destroy:function(){x.verbose("Destroying previous instance of embed"),x.reset(),C.removeData(w).off(y)},refresh:function(){x.verbose("Refreshing selector cache"),E=C.find(m.placeholder),U=C.find(m.icon),j=C.find(m.embed)},bind:{events:function(){x.has.placeholder()&&(x.debug("Adding placeholder events"),C.on("click"+y,m.placeholder,x.createAndShow).on("click"+y,m.icon,x.createAndShow))}},create:function(){var e=x.get.placeholder();e?x.createPlaceholder():x.createAndShow()},createPlaceholder:function(e){var n=x.get.icon(),o=x.get.url(),t=x.generate.embed(o);e=e||x.get.placeholder(),C.html(v.placeholder(e,n)),x.debug("Creating placeholder for embed",e,n)},createEmbed:function(e){x.refresh(),e=e||x.get.url(),j=$("<div/>").addClass(p.embed).html(x.generate.embed(e)).appendTo(C),s.onCreate.call(S,e),x.debug("Creating embed object",j)},changeEmbed:function(e){j.html(x.generate.embed(e))},createAndShow:function(){x.createEmbed(),x.show()},change:function(e,n,o){x.debug("Changing video to ",e,n,o),C.data(b.source,e).data(b.id,n),o?C.data(b.url,o):C.removeData(b.url),x.has.embed()?x.changeEmbed():x.create()},reset:function(){x.debug("Clearing embed and showing placeholder"),x.remove.active(),x.remove.embed(),x.showPlaceholder(),s.onReset.call(S)},show:function(){x.debug("Showing embed"),x.set.active(),s.onDisplay.call(S)},hide:function(){x.debug("Hiding embed"),x.showPlaceholder()},showPlaceholder:function(){x.debug("Showing placeholder image"),x.remove.active(),s.onPlaceholderDisplay.call(S)},get:{id:function(){return s.id||C.data(b.id)},placeholder:function(){return s.placeholder||C.data(b.placeholder)},icon:function(){return s.icon?s.icon:C.data(b.icon)!==o?C.data(b.icon):x.determine.icon()},source:function(e){return s.source?s.source:C.data(b.source)!==o?C.data(b.source):x.determine.source()},type:function(){var e=x.get.source();return f[e]!==o?f[e].type:!1},url:function(){return s.url?s.url:C.data(b.url)!==o?C.data(b.url):x.determine.url()}},determine:{autoplay:function(){x.should.autoplay()&&(s.autoplay=!0)},source:function(e){var n=!1;return e=e||x.get.url(),e&&$.each(f,function(o,t){return-1!==e.search(t.domain)?(n=o,!1):void 0}),n},icon:function(){var e=x.get.source();return f[e]!==o?f[e].icon:!1},url:function(){var e=s.id||C.data(b.id),n=s.source||C.data(b.source),t;return t=f[n]!==o?f[n].url.replace("{id}",e):!1,t&&C.data(b.url,t),t}},set:{active:function(){C.addClass(p.active)}},remove:{active:function(){C.removeClass(p.active)},embed:function(){j.empty()}},encode:{parameters:function(e){var n=[],o;for(o in e)n.push(encodeURIComponent(o)+"="+encodeURIComponent(e[o]));return n.join("&amp;")}},generate:{embed:function(e){x.debug("Generating embed html");var n=x.get.source(),o,t;return e=x.get.url(e),e?(t=x.generate.parameters(n),o=v.iframe(e,t)):x.error(h.noURL,C),o},parameters:function(e,n){var t=f[e]&&f[e].parameters!==o?f[e].parameters(s):{};return n=n||s.parameters,n&&(t=$.extend({},t,n)),t=s.onEmbed(t),x.encode.parameters(t)}},has:{embed:function(){return j.length>0},placeholder:function(){return s.placeholder||C.data(b.placeholder)}},should:{autoplay:function(){return"auto"===s.autoplay?s.placeholder||C.data(b.placeholder)!==o:s.autoplay}},is:{video:function(){return"video"==x.get.type()}},setting:function(e,n){if(x.debug("Changing setting",e,n),$.isPlainObject(e))$.extend(!0,s,e);else{if(n===o)return s[e];$.isPlainObject(s[e])?$.extend(!0,s[e],n):s[e]=n}},internal:function(e,n){if($.isPlainObject(e))$.extend(!0,x,e);else{if(n===o)return x[e];x[e]=n}},debug:function(){!s.silent&&s.debug&&(s.performance?x.performance.log(arguments):(x.debug=Function.prototype.bind.call(console.info,console,s.name+":"),x.debug.apply(console,arguments)))},verbose:function(){!s.silent&&s.verbose&&s.debug&&(s.performance?x.performance.log(arguments):(x.verbose=Function.prototype.bind.call(console.info,console,s.name+":"),x.verbose.apply(console,arguments)))},error:function(){s.silent||(x.error=Function.prototype.bind.call(console.error,console,s.name+":"),x.error.apply(console,arguments))},performance:{log:function(e){var n,o,t;s.performance&&(n=(new Date).getTime(),t=a||n,o=n-t,a=n,i.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:S,"Execution Time":o})),clearTimeout(x.performance.timer),x.performance.timer=setTimeout(x.performance.display,500)},display:function(){var e=s.name+":",n=0;a=!1,clearTimeout(x.performance.timer),$.each(i,function(e,o){n+=o["Execution Time"]}),e+=" "+n+"ms",r&&(e+=" '"+r+"'"),t.length>1&&(e+=" ("+t.length+")"),(console.group!==o||console.table!==o)&&i.length>0&&(console.groupCollapsed(e),console.table?console.table(i):$.each(i,function(e,n){console.log(n.Name+": "+n["Execution Time"]+"ms")}),console.groupEnd()),i=[]}},invoke:function(e,n,t){var r=T,a,i,c;return n=n||d,t=S||t,"string"==typeof e&&r!==o&&(e=e.split(/[\. ]/),a=e.length-1,$.each(e,function(n,t){var c=n!=a?t+e[n+1].charAt(0).toUpperCase()+e[n+1].slice(1):e;if($.isPlainObject(r[c])&&n!=a)r=r[c];else{if(r[c]!==o)return i=r[c],!1;if(!$.isPlainObject(r[t])||n==a)return r[t]!==o?(i=r[t],!1):(x.error(h.method,e),!1);r=r[t]}})),$.isFunction(i)?c=i.apply(t,n):i!==o&&(c=i),$.isArray(u)?u.push(c):u!==o?u=[u,c]:c!==o&&(u=c),i}},l?(T===o&&x.initialize(),x.invoke(c)):(T!==o&&T.invoke("destroy"),x.initialize())}),u!==o?u:this},$.fn.embed.settings={name:"Embed",namespace:"embed",silent:!1,debug:!1,verbose:!1,performance:!0,icon:!1,source:!1,url:!1,id:!1,autoplay:"auto",color:"#444444",hd:!0,brandedUI:!1,parameters:!1,onDisplay:function(){},onPlaceholderDisplay:function(){},onReset:function(){},onCreate:function(e){},onEmbed:function(e){return e},metadata:{id:"id",icon:"icon",placeholder:"placeholder",source:"source",url:"url"},error:{noURL:"No URL specified",method:"The method you called is not defined"},className:{active:"active",embed:"embed"},selector:{embed:".embed",placeholder:".placeholder",icon:".icon"},sources:{youtube:{name:"youtube",type:"video",icon:"video play",domain:"youtube.com",url:"//www.youtube.com/embed/{id}",parameters:function(e){return{autohide:!e.brandedUI,autoplay:e.autoplay,color:e.color||o,hq:e.hd,jsapi:e.api,modestbranding:!e.brandedUI}}},vimeo:{name:"vimeo",type:"video",icon:"video play",domain:"vimeo.com",url:"//player.vimeo.com/video/{id}",parameters:function(e){return{api:e.api,autoplay:e.autoplay,byline:e.brandedUI,color:e.color||o,portrait:e.brandedUI,title:e.brandedUI}}}},templates:{iframe:function(e,n){var o=e;return n&&(o+="?"+n),'<iframe src="'+o+'" width="100%" height="100%" frameborder="0" scrolling="no" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'},placeholder:function(e,n){var o="";return n&&(o+='<i class="'+n+' icon"></i>'),e&&(o+='<img class="placeholder" src="'+e+'">'),o}},api:!1,onPause:function(){},onPlay:function(){},onStop:function(){}}}(jQuery,window,document);